---
---

<canvas id="particle-canvas"></canvas>

<style>
  #particle-canvas {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    pointer-events: none;
    z-index: 1000;
  }
</style>

<script>
  const canvas = document.getElementById('particle-canvas') as HTMLCanvasElement;
  const ctx = canvas.getContext('2d')!;
  
  let width = window.innerWidth;
  let height = window.innerHeight;
  let mouseX = width / 2;
  let mouseY = height / 2;
  let isMouseMoving = false;
  let mouseTimeout: number;
  
  interface Particle {
    x: number;
    y: number;
    vx: number;
    vy: number;
    life: number;
    maxLife: number;
    size: number;
    hue: number;
  }
  
  const particles: Particle[] = [];
  const maxParticles = 100;
  
  function resize() {
    width = window.innerWidth;
    height = window.innerHeight;
    canvas.width = width;
    canvas.height = height;
  }
  
  function createParticle(x: number, y: number) {
    if (particles.length >= maxParticles) return;
    
    const angle = Math.random() * Math.PI * 2;
    const speed = Math.random() * 2 + 0.5;
    
    particles.push({
      x,
      y,
      vx: Math.cos(angle) * speed,
      vy: Math.sin(angle) * speed,
      life: 1,
      maxLife: Math.random() * 40 + 20,
      size: Math.random() * 3 + 1,
      hue: Math.random() * 30 + 75 // Green to yellow range
    });
  }
  
  function updateParticles() {
    for (let i = particles.length - 1; i >= 0; i--) {
      const p = particles[i];
      
      p.x += p.vx;
      p.y += p.vy;
      p.life -= 1 / p.maxLife;
      p.vx *= 0.98;
      p.vy *= 0.98;
      
      if (p.life <= 0) {
        particles.splice(i, 1);
      }
    }
  }
  
  function drawParticles() {
    ctx.clearRect(0, 0, width, height);
    
    for (const p of particles) {
      const alpha = p.life * 0.6;
      const size = p.size * p.life;
      
      // Glow effect
      const gradient = ctx.createRadialGradient(p.x, p.y, 0, p.x, p.y, size * 3);
      gradient.addColorStop(0, `hsla(${p.hue}, 70%, 60%, ${alpha})`);
      gradient.addColorStop(0.5, `hsla(${p.hue}, 70%, 50%, ${alpha * 0.5})`);
      gradient.addColorStop(1, `hsla(${p.hue}, 70%, 40%, 0)`);
      
      ctx.beginPath();
      ctx.arc(p.x, p.y, size * 3, 0, Math.PI * 2);
      ctx.fillStyle = gradient;
      ctx.fill();
      
      // Core
      ctx.beginPath();
      ctx.arc(p.x, p.y, size, 0, Math.PI * 2);
      ctx.fillStyle = `hsla(${p.hue}, 80%, 70%, ${alpha})`;
      ctx.fill();
    }
  }
  
  function animate() {
    if (isMouseMoving) {
      for (let i = 0; i < 2; i++) {
        createParticle(
          mouseX + (Math.random() - 0.5) * 10,
          mouseY + (Math.random() - 0.5) * 10
        );
      }
    }
    
    updateParticles();
    drawParticles();
    requestAnimationFrame(animate);
  }
  
  function handleMouseMove(e: MouseEvent) {
    mouseX = e.clientX;
    mouseY = e.clientY;
    isMouseMoving = true;
    
    clearTimeout(mouseTimeout);
    mouseTimeout = window.setTimeout(() => {
      isMouseMoving = false;
    }, 100);
  }
  
  window.addEventListener('resize', resize);
  window.addEventListener('mousemove', handleMouseMove);
  
  resize();
  animate();
</script>
